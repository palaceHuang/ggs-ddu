# 第一部分 作用域和闭包

## 第一章 作用域是什么

几乎所有语言最基本的功能之一，就是能够储存变量当中的值，并且能在之后对这个值进行访问和修改。事实上，正式这种储存和访问变量的值的能力，将 ***状态*** 带给了程序。  
几个问题：
  变量储存在哪里？
  程序如何找到它们？

这些问题说明需要一套设计良好的规则来存储变量，并且在之后可以方便的找到这些变量。这套规则被称为作用域。

### 1.1 编译原理

JavaScript实际上是一门编译语言。它不是提前编译的，编译结果也不能在分布式系统中进行移植。

传统编译步骤：
1. 分词/词法分析（Tokenizing/Lexing)  
   这个过程会将由字符组成的字符串分解成（对编程语言来说）有意义的代码块，这些代码块被称为 ***词法单元（token）***。举个例子:
   ~~~js
   var a = 2;
   ~~~
   这段程序会被分解为下面这些词法单元：var、a、=、2、；。空格是否会被当做词法单元，取决于空格在这门语言中是否具有意义。
2. 解析/语法分析（Parsing）  
   这个过程是将词法单元流（数组）转换为一个由元素逐级嵌套所组成的程序语法结构树。这棵树被称为**抽象语法树** (Abstract Syntax Tree, AST)。  
   var a = 2 ;的抽象语法树中可能会有一个叫做VariableDeclaration的顶级节点，接下来是一个Identifier(值为a)的子节点，以及一个叫做AssignmentExpression的子节点。AssignmentExpression节点有一个叫做NumbericLiteral（值为2）的子节点。
3. 代码生成  
   将AST转换为可执行代码的过程被称为代码生成。这个过程与语言、目标平台等信息相关。  
   抛开具体细节，简单来说就是有某种方法可以将var a = 2;的AST转化为一组机器指令，用来创建一个叫做a的变量(包含分配内存等)，并将一个值储存在a中。  

JavaScript引擎不会有大量的时间来进行优化，因为与其它语言不同，JavaScript的编译过程不是发生在构建之前的。  

对于JavaScript来说，大部分情况下编译发生在代码执行前的几微秒（甚至更短）的时间内。在作用域的背后，JavaScript用尽了各种办法（比如JIT，可以延迟编译甚至实施重编译）来保证性能最佳。  

任何JavaScript代码片段在执行前都要进行编译。




## 第二章 词法作用域

## 函数作用域和块作用域

## 提升

## 作用域闭包

# 第二部分 this和对象原型

## 第一章 关于this

## 第二章 this全面解析

## 第三章 对象

## 第四章 混合对象“类”

## 第五章 原型

## 第六章 行为委托